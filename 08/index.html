<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Code Print with Highlight.js</title>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/monokai-sublime.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <!-- and it's easy to individually load additional languages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>

    <script>hljs.highlightAll();</script>
    <style>
        .float-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
        }
        .wrapper {
            /* position: absolute;
            bottom: 100px; */
            display: flex;
            justify-content: flex-start;
            margin-left: 30px;
            width: auto;
        }
        pre code.hljs {
            border-radius: .5em !important;
            padding: 0 3em 2em 0 !important;
        }
        body {
            background: rgb(22,255,39)
        }
    </style>
</head>

<body>
    <div id="mycode-pre" style="visibility: hidden; height: 0;"></div>
    <div class="wrapper">
        <pre><code id="myCode" class="language-python"></code></pre>
    </div>
    <button class="float-button" onclick="printCode()">Print Code</button>
</body>

<script>

    function printCode() {
        var code = document.getElementById("mycode-pre").textContent;
        var speed = 10; // 设置输出速度

        // 高亮代码
        hljs.highlightElement(document.getElementById("myCode"));

        // 模拟打印
        var index = 0;

        // 设置定时器，每隔 speed 毫秒输出一个字符
        var timer = setInterval(function () {
            document.getElementById("myCode").innerHTML += code.charAt(index);
            index++;

            document.querySelectorAll('pre code').forEach((el) => {
                hljs.highlightElement(el);
            });

            if (index === code.length) {
                clearInterval(timer);
            }
        }, speed);
    }

    // 要打印的代码
    var code = `
    from itertools import combinations

    # 定义全集，表示需要覆盖的长江经济带所有省份
    provinces_needed = set(["上海", "江苏", "浙江", "安徽", 
                            "江西", "湖南", "湖北", "重庆", 
                            "四川", "云南", "贵州"])

    # 定义子集，表示每个广播台可以覆盖的省份
    stations = {}

    stations["一台"] = set(["上海", "江苏", "浙江"])
    stations["二台"] = set(["安徽", "江西", "湖南"])
    stations["三台"] = set(["湖北", "重庆", "四川"])
    stations["四台"] = set(["云南", "贵州"])
    stations["五台"] = set(["湖南", "湖北", "重庆"])

    # 存储最终选择的广播台
    final_stations = set()
    # 存储最小广播台数量
    min_length = float('inf')

    # 遍历所有可能的组合
    for i in range(1, len(stations) + 1):
    
        for subset in combinations(stations, i):

            provinces_covered = set([province for station in subset for province in stations[station]])

            # 如果这个组合可以覆盖所有的省份，且数量小于当前最小数量，则更新最小数量和最终选择的广播台
            if provinces_needed.issubset(provinces_covered) and len(subset) < min_length:
                min_length = len(subset)
                final_stations = subset

    print(final_stations)
   `;


    // 将代码放入 pre 标签中
    document.getElementById("mycode-pre").textContent = code;

</script>

</html>
